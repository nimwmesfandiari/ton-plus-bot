<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  background:#050505;
  color:#fff;
  font-family:sans-serif;
  user-select:none;
}
.page{display:none;padding:24px}
.page.active{display:block}

.balance{
  font-size:36px;
  text-align:center;
  color:#00d0ff;
  margin-top:20px;
  font-weight:bold;
}

.mine{
  width:180px;height:180px;
  margin:40px auto;
  border-radius:50%;
  background:radial-gradient(circle,#00d0ff,#004e7a);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:bold;
  box-shadow:0 0 40px rgba(0,208,255,.6);
  transition:transform .05s;
}
.mine:active{transform:scale(.94)}

nav{
  position:fixed;
  bottom:0;
  width:100%;
  display:flex;
  justify-content:space-around;
  background:#0b0b0b;
  padding:10px 0;
  border-top:1px solid #111;
}
.nav{
  color:#777;
  font-size:14px;
}
.nav.active{color:#00d0ff}
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="page active">
  <div class="balance" id="balance">0.000000</div>
  <div class="mine" id="mine">MINE</div>
</div>

<!-- WALLET -->
<div id="wallet" class="page">
  <h2>Wallet</h2>
  <p id="walletBalance"></p>
</div>

<!-- FRIENDS -->
<div id="friends" class="page">
  <h2>Friends</h2>
  <p>Referral system</p>
</div>

<!-- TASKS -->
<div id="tasks" class="page">
  <h2>Tasks</h2>
  <p>Earn more</p>
</div>

<!-- NAV -->
<nav>
  <div class="nav active" data-page="home">Home</div>
  <div class="nav" data-page="wallet">Wallet</div>
  <div class="nav" data-page="friends">Friends</div>
  <div class="nav" data-page="tasks">Tasks</div>
</nav>

<script>
Telegram.WebApp.ready();
Telegram.WebApp.expand();

/* STATE */
let balance = 0;

/* ELEMENTS */
const bal = document.getElementById("balance");
const wbal = document.getElementById("walletBalance");
const mineBtn = document.getElementById("mine");

/* NUMBER ANIMATION (Hamster style) */
function animateAdd(amount){
  const start = balance;
  const end = balance + amount;
  let t = 0;

  const anim = setInterval(()=>{
    t += 0.15;
    const v = start + (end - start) * t;
    bal.innerText = v.toFixed(6);
    if(t >= 1){
      clearInterval(anim);
      balance = end;
      bal.innerText = balance.toFixed(6);
      wbal.innerText = balance.toFixed(6);
    }
  },16);
}

/* FAST TAP SUPPORT */
mineBtn.addEventListener("touchstart", e=>{
  e.preventDefault();
  animateAdd(0.0001);
},{passive:false});

mineBtn.addEventListener("mousedown", ()=>{
  animateAdd(0.0001);
});

/* NAVIGATION */
document.querySelectorAll(".nav").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".nav").forEach(n=>n.classList.remove("active"));
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));

    btn.classList.add("active");
    document.getElementById(btn.dataset.page).classList.add("active");
  });
});
</script>

</body>
</html>
